<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">

<!-- Begin Jekyll SEO tag v2.3.0 -->
<title>Try it yourself! | DoShiCo</title>
<meta property="og:title" content="Try it yourself!" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Domain Shift challenge for Control." />
<meta property="og:description" content="Domain Shift challenge for Control." />
<link rel="canonical" href="http://localhost:4000/try" />
<meta property="og:url" content="http://localhost:4000/try" />
<meta property="og:site_name" content="DoShiCo" />
<script type="application/ld+json">
{"name":null,"description":"Domain Shift challenge for Control.","author":null,"@type":"WebPage","url":"http://localhost:4000/try","publisher":null,"image":null,"headline":"Try it yourself!","dateModified":null,"datePublished":null,"sameAs":null,"mainEntityOfPage":null,"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <meta name="description" content="Domain Shift challenge for Control."/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/assets/css/style.css?v=6195bc27c3511918ca7590082cff9f5a5241f384">
  </head>
  <body>
    <section class="page-header">
     <h1 class="project-name">Try it yourself!</h1>
     <h2 class="project-tagline">K. Kelchtermans</h2>

    </section>

    <section class="main-content">
      <p>Everything required to reproduce the results is made <strong>accessible</strong>. In the following steps we explain first how to obtain access to the three big software packages (ROS, Gazebo and Tensorflow) with the use of docker. Second, we go over the installation of small packages locally from within a docker container. The final step entails the usage of the code in order to reproduce our results as well as get new results of your own.</p>

<p>If you use the code in your own work, please refer correctly to <a href="http://localhost:4000/assets/paper.pdf" title="Open PDF view">our paper</a>.</p>

<figure class="highlight"><pre><code class="language-tex" data-lang="tex">	@article<span class="p">{</span> kelchter2017doshico,
		title=<span class="p">{</span>DoShiCo: Domain Shift challenge for Control<span class="p">}</span>,
		author=<span class="p">{</span>Kelchtermans, Klaas and Tuytelaars, Tinne<span class="p">}</span>,
		year=<span class="p">{</span>2017<span class="p">}}</span></code></pre></figure>

<h2><a href="https://github.com/kkelchte/doshico/tree/master/assets/code" target="_blank">1. Build a Docker Image</a></h2>
<p>DoShiCo requires a combination of <a href="http://wiki.ros.org/kinetic/Installation" title="wiki.ros.org">ROS (kinetic)</a>, <a href="http://gazebosim.org/tutorials?tut=install_ubuntu&amp;ver=7.0" title="gazebosim.org">Gazebo (7)</a> and <a href="https://www.tensorflow.org/" title="tesorflow.org">Tensorflow-gpu (1.11)</a> with <a href="https://developer.nvidia.com/cuda-downloads" title="cuda-download">nvidia</a> (CUDA &gt;=8.0). Installing ROS is most convenient on a Ubuntu (16.4) operating system. The full installation can be tedious. Therefore we supply a docker image with all four requirements that can easily be pulled from the <a href="https://hub.docker.com/" title="hub.docker.com">dockerhub page</a>. Before you can do this, you’ll have to have <a href="https://docs.docker.com/engine/installation/" title="docs.docker.com/engine/installation">docker</a> installed and running. We also assume you have an nvidia GPU available with drivers installed as well as <a href="https://github.com/NVIDIA/nvidia-docker" title="github/nvidia-docker">nvidia-docker</a>. We also provide a <a href="trouble/#prerequisites" title="troubleshoot">troubleshoot page</a> with more instructions on the installation of the prerequisits.</p>

<p>Once the prerequisites (docker, nvidia and nvidia-docker) are fullfilled, you can use a local version of the image with the following scripts. Please read the script files before running as some environment variables might be system dependent.</p>

<blockquote>
  <ol>
    <li>Copy the following <a href="https://github.com/kkelchte/doshico/tree/master/assets/code" title="docker-scripts" target="_blank">scripts</a> in a local directory.</li>
    <li>Run the script the <code class="highlighter-rouge">build.sh</code> script in order to create a doshico_image.</li>
    <li>(Optional) Use the <code class="highlighter-rouge">run.sh</code>, <code class="highlighter-rouge">save.sh</code> and <code class="highlighter-rouge">test.sh 0</code> to play around with the image and container if you’re not used to docker. In case you encounter a problem, you might find the solution <a href="troubleshoot.md" title="Troubleshoot page">here</a>. If not, feel free to contact me.</li>
  </ol>
</blockquote>

<p>Note: The docker image has Xpra installed. This makes it possible to run applications without using a graphical session. The latter is especially suited in combination with a computing cluster where graphical sessions are often not allowed. Instructions on running the image with xpra is left out of this page for readibility.</p>

<h2>2. Install ROS- and Tensorflow-packages</h2>
<p>If all big software packages (ROS, Gazebo, Tensorflow) are installed or accessible in a docker image, it is now time to clone the local ROS- and Tensorflow-packages for flying the drone with a DNN policy. As we want you to easily adjust the packages, we did not include the code in the docker image. The structure of the packages are depicted bellow. The arrows indicate dependencies.</p>

<ul>
  <li><a href="https://github.com/kkelchte/hector_quadrotor" target="_blank">Drone Simulator</a> is a simulated version of the bebop 2 drone based on the Hector quadrotor package.</li>
  <li><a href="https://github.com/kkelchte/simulation_supervised" target="_blank">Simulated-Supervised</a> is a ROS package forming the interface between the simulated drone and the DNN policy.</li>
  <li><a href="https://github.com/kkelchte/pilot" target="_blank">Pilot</a> represents the code block for training the DNN policy in an online or offline fashion with tensorflow.</li>
  <li>Log folder with checkpoints:
    <ul>
      <li>imagenet-pretrained <a href="https://homes.esat.kuleuven.be/~kkelchte/checkpoints/mobilenet_025.zip" target="_blank">mobilenet 0.25</a></li>
      <li>doshico-pretrained <a href="https://homes.esat.kuleuven.be/~kkelchte/checkpoints/naux.zip" target="_blank">NAUX</a></li>
      <li>doshico-pretrained <a href="https://homes.esat.kuleuven.be/~kkelchte/checkpoints/auxd.zip" target="_blank">AUXD</a></li>
    </ul>
  </li>
  <li>The data consists of 3 sets:
    <ul>
      <li><a href="https://homes.esat.kuleuven.be/~kkelchte/data/pilot_data/canyon_forest_sandbox.zip" target="_blank">Canyon_forest_sandbox</a> with data collected by the expert in the training environments (canyon, forest, sandbox).</li>
      <li><a href="https://homes.esat.kuleuven.be/~kkelchte/data/pilot_data/esat.zip" target="_blank">ESAT</a> with data collected by the expert in the validation environment (ESAT).</li>
      <li><a href="https://homes.esat.kuleuven.be/~kkelchte/data/pilot_data/almost_collision_set.zip" target="_blank">The Almost-Collision dataset</a> with data collected by hand in the real world of almost collisions imposing only one correct action.</li>
    </ul>
  </li>
</ul>

<p><img src="http://localhost:4000/assets/img/project.png" alt="frontpage" class="center-image" /></p>

<p>The installation of the packages is explained with two scripts:</p>

<blockquote>
  <ul>
    <li><a href="https://github.com/kkelchte/doshico/tree/master/assets/instructions/step_one.sh" target="_blank">Step 1</a>: Installing and testing the <strong>offline</strong> setting.</li>
    <li><a href="https://github.com/kkelchte/pilot/blob/master/scripts/step_two.sh" target="_blank">Step 2</a>: Installing and testing the <strong>online</strong> setting.</li>
  </ul>
</blockquote>

<h2>3. The Challenge</h2>
<p>The DoShiCo challenge focusses on dealing with the domain shift when training a policy in basic environments and see if it adapts to more realistic and real-world environments. The goal is to perform monocular collision avoidance with a UAV over 1 direction.</p>

<p><img src="http://localhost:4000/assets/img/frontpage.png" alt="variance" class="center-image" /></p>

<p>The policy has to be based solely in monocular RGB input. The <strong>training</strong> happens in three types of basic simulated environments: Canyon, Forest and Sandbox. The environments are generated on the fly at random. The training procedure is left open: online/offline, reinforcement or imitation learning, … .</p>

<p>Validate the policy <strong>online</strong> in a more realistic ESAT corridor. The performance is measured in average flying distance in the 2 directions of the corridor while flying at a constant speed of 0.8m/s.</p>

<p>Test the policy <strong>offline</strong> on the Almost-Collision dataset. Comparing performances in the real-world is hard due to many external factors (battery state, wind turbulences,…). The Almost-Collision dataset contains small trajectories capturing very near collisions that can only be avoided with the correct action. The performance should be measured as accuracies. The continuous control in  yaw  is  discretized  with thresholds ±0.3 for left, straight and right.</p>

<p>The large variance that comes along with training deep neural network policies makes it hard to compare different methods. We strongly recommend to include a graph similar to the image below. It depicts the performance over the percentage of policies reaching this performance.</p>

<p><img src="http://localhost:4000/assets/img/variance.png" alt="variance" class="center-image" /></p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Flying Distance <br />(m)</th>
      <th style="text-align: center">NAUX</th>
      <th style="text-align: center">AUXD</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">Canyon</td>
      <td style="text-align: center">43.96</td>
      <td style="text-align: center">38.41</td>
    </tr>
    <tr>
      <td style="text-align: left">Forest</td>
      <td style="text-align: center">45.99</td>
      <td style="text-align: center">50.24</td>
    </tr>
    <tr>
      <td style="text-align: left">Sandbox</td>
      <td style="text-align: center">7.03</td>
      <td style="text-align: center">8.62</td>
    </tr>
    <tr>
      <td style="text-align: left">ESAT</td>
      <td style="text-align: center">47.03</td>
      <td style="text-align: center">57.63</td>
    </tr>
  </tbody>
</table>

<p>Our results, as demonstrated in <a href="http://localhost:4000/assets/paper.pdf" title="PDF view">our paper</a>, can be used as a benchmark. The values present the average over the top 10% policies trained from 50 trained policies. You can use the test scripts within the <a href="https://github.com/kkelchte/pilot">pilot</a> package to reproduce these numbers or improve on them.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Almost-Collision <br /> Accuracies</th>
      <th style="text-align: center">AUXD</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right">ESAT real</td>
      <td style="text-align: center">64</td>
    </tr>
    <tr>
      <td style="text-align: right">Corridor 1</td>
      <td style="text-align: center">67</td>
    </tr>
    <tr>
      <td style="text-align: right">Corridor 2</td>
      <td style="text-align: center">35</td>
    </tr>
    <tr>
      <td style="text-align: right">Office</td>
      <td style="text-align: center">52</td>
    </tr>
    <tr>
      <td style="text-align: right">Cafeteria</td>
      <td style="text-align: center">25</td>
    </tr>
    <tr>
      <td style="text-align: right">Garage</td>
      <td style="text-align: center">61</td>
    </tr>
    <tr>
      <td style="text-align: right">Night</td>
      <td style="text-align: center">63</td>
    </tr>
    <tr>
      <td style="text-align: right">Avg. Loc.</td>
      <td style="text-align: center">52</td>
    </tr>
  </tbody>
</table>

<p>If you have any questions regarding the code or installation, feel free to contact me. Goodluck!</p>



      <footer class="site-footer">
          <span class="site-footer-owner"><a href="/doshico">Home</a> (Contact: klaas.kelchtermans ~at~ esat.kuleuven.be).</span>
          <!-- <span class="site-footer-owner"><a href="https://kkelchte.github.io/doshico">Back</a> (Contact: klaas.kelchtermans ~at~ esat.kuleuven.be).</span> -->
      </footer>
    </section>

    
  </body>



</html>
